{% extends "base.html" %}
{% load static i18n %}

{% block body %}
<div class="bg-white pt-8 sm:pt-24">
    <div class="search-bar mx-4 sm:container sm:mx-auto">
        <h1 class="font-bold sm:text-3xl sm:mb-6">Encuentra tu trabajo so√±ado, mas rapido y mejor.</h1>
        <div class="w-full sm:pb-16">
            <form class="mt-4 sm:flex" action="{% url 'home' %}" method="get">
                {{ form.keyword }}
                {{ form.category }}
                <input class="w-full mt-4 py-2 px-4 rounded font-bold sm:h-14 sm:text-2xl" style="background-color: #F78C2C; color: white; margin-bottom: 32px;" type='submit' value="Buscar">
            </form>
        </div>
    </div>
</div>
{% if keyword and category %}
    <div class="mx-4 sm:mx-auto sm:container">
        <p class="my-4 font-bold">Resultados para termino: "{{ keyword }}" Categoria: "{{ category }}"</p>
    </div>
{% elif keyword %}
    <div class="mx-4 sm:mx-auto sm:container">
        <p class="my-4 font-bold">Resultados para termino: "{{ keyword }}"</p>
    </div>
{% endif %}

{% for jobpost in object_list %}
    <div class="{% if forloop.first %}mt-8 sm:mt-0 {% endif %}py-6 px-4 rounded-lg border mb-2 flex" style="background-color: white;">
        <div class="w-16 mr-6">
            <img  class="border6" src="{{ jobpost.company.logo.url}}">
        </div>
        <div class="sm:relative sm:-top-1.5">
            <h3 class="text-xl"><a class="text-black hover:text-yellow-600" href="{{ jobpost.get_absolute_url }}">{{ jobpost.title }}</a></h3>
            <p class="text-sm">{{ jobpost.company }} - {{ jobpost.location.name }}</p>
            <div class="flex justify-start">
                <div class="font-light px-3 py-1 text-sm my-2 mr-3 w-max" style="background-color: #F6F7F9;">{{ jobpost.job_type }}</div>
                {% if object.is_remote %} 
                <div class="font-light px-3 py-1 text-sm my-2 mx-3 w-max" style="background-color: #F6F7F9;">Remoto</div>
                {% endif %} 
                
            </div>
        </div>

    </div>

    {% if page_obj.has_other_pages %}
    <div class="mt-12">
        <span class="current mr-12">
            Pagina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }} [ {{ page_obj.paginator.count }} trabajos]
        </span>

        <span class="step-links">
            {% if page_obj.has_previous %}
                <a class="mx4 rounded-lg border py-1 px-3" href="?page=1">&laquo; Primer</a>
                <a class="mx4 rounded-lg border py-1 px-3" href="?page={{ page_obj.previous_page_number }}">Anterior</a>
            {% endif %}
    
          
    
            {% if page_obj.has_next %}
                <a class="mx4 rounded-lg border py-1 px-3" href="?page={{ page_obj.next_page_number }}">Siguiente</a>
                <a class="mx4 rounded-lg border py-1 px-3" href="?page={{ page_obj.paginator.num_pages }}">Ultima Pagina &raquo;</a>
            {% endif %}
        </span>
    </div>
    {% endif %}

{% empty %}
    <div class="mx-4 sm:mx-auto sm:container">
        <p class="text-center">No tenemos trabajos con esos criterios</p>
    </div>
    
{% endfor %}

{% endblock body %}